---
const availableLanguages = ["es", "en"];
---

<div
  class="z-[100] flex items-center gap-1 p-1 bg-white/5 light:bg-black/5 backdrop-blur-xl border border-white/10 light:border-black/10 rounded-full shadow-2xl transition-colors duration-700"
>
  {
    availableLanguages.map((lang) => (
      <button
        aria-label={`Switch to ${lang} language`}
        data-lang-btn={lang}
        class="px-4 py-1.5 rounded-full text-[10px] font-bold tracking-widest uppercase transition-all duration-300 text-gray-400 light:text-gray-500 hover:text-white light:hover:text-black"
      >
        {lang}
      </button>
    ))
  }
</div>

<script>
  import { getLang, setLang } from "../i18n";

  const buttons = document.querySelectorAll("[data-lang-btn]");
  const currentLang = getLang();

  buttons.forEach((btn) => {
    const lang = btn.getAttribute("data-lang-btn");

    if (lang === currentLang) {
      btn.classList.add("bg-white", "text-gray-500","hover:text-gray-800");
    } else {
      btn.classList.add("text-gray-400");
    }

    btn.addEventListener("click", () => {
      if (lang && lang !== currentLang) {
        setLang(lang);

        const currentHash = window.location.hash;

        window.location.href =
          window.location.pathname + window.location.search + currentHash;

        window.location.reload();
      }
    });
  });
</script>
